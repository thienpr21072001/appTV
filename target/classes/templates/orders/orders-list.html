
<!DOCTYPE html>
<html>
  <head th:replace="layouts::head">
   
  </head>
  
  <body class="nav-md">
    <div class="container body">
      <div class="main_container">
        <div class="col-md-3 left_col">
          <div class="left_col scroll-view">
            <div class="navbar nav_title" style="border: 0;">
              <a th:href='@{/index}' class="site_title"><i class="fa fa-paw"></i> <span> Management </span></a>
            </div>
            <div class="clearfix"></div>
            <!-- menu profile quick info -->
            <div class="profile clearfix">
              <div class="profile_pic">
                <img th:src="@{/resources/images/img.jpg}" alt="..." class="img-circle profile_img">
              </div>
              <div th:replace="layouts::profile" class="profile_info">
 
              </div>
            </div>
            <!-- /menu profile quick info -->
            <br />
            <!-- sidebar menu -->

			<div th:replace="layouts::sidebar" >
 
			</div>		
 
            <!-- /sidebar menu -->
            <!-- /menu footer buttons -->
            <div class="sidebar-footer hidden-small">
              <a data-toggle="tooltip" data-placement="top" title="Settings">
                <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
              </a>
              <a data-toggle="tooltip" data-placement="top" title="FullScreen">
                <span class="glyphicon glyphicon-fullscreen" aria-hidden="true"></span>
              </a>
              <a data-toggle="tooltip" data-placement="top" title="Lock">
                <span class="glyphicon glyphicon-eye-close" aria-hidden="true"></span>
              </a>
              <a data-toggle="tooltip" data-placement="top" title="Logout" href="login.html">
                <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
              </a>
            </div>
            <!-- /menu footer buttons -->
          </div>
        </div>
        <!-- top navigation -->
        
		<div  th:replace="layouts::top_nav"  >
 
          </div>
        <!-- /top navigation -->
        
        
        <!-- page content -->
         <div class="right_col" role="main">
	<div class="">
			<div class="page-title">
				<div class="title_left">
					<h4>Hoá đơn </h4>
				</div>
				<div class="clearfix"></div>
			</div>
				<div class="clearfix"></div>
			<div class="clearfix"></div>
					<div class="row">
						<div class="col-md-12 col-sm-12 ">
							<div class="x_panel">
								<div class="x_content">
									<br />
									 
									<form th:object="${searchForm}" id="searchForm" method="POST" th:action="@{/orders/list/1}" class="form-horizontal form-label-left">
										<div class="item form-group">
											<label class="col-form-label col-md-3 col-sm-3 label-align" for="name">Tình trạng đơn  <span class="required">*</span>
											</label>
											<div class="col-md-6 col-sm-6 ">
												<select th:field="*{approvedStep}" class="form-control"  >
														<option value="" >Tất cả</option>
											    	 <option th:each="item : ${T(com.app.utils.ApprovedStep).values()}"  th:value="${item.value}" th:text="${item.text}"></option>
											    </select>
											</div>
										</div> 
										<div class="item form-group">
											<label class="col-form-label col-md-3 col-sm-3 label-align" for="name">Nơi khởi hành <span class="required">*</span>
											</label>
											<div class="col-md-6 col-sm-6 ">
												<select th:field="*{provinceId}" class="form-control"  >
													 <option value="" >Tất cả</option>
											    	 <option th:each="item : ${T(com.app.utils.ProvinceUtil).values()}"  th:value="${item.value}" th:text="${item.text}"></option>
											    </select>
											</div>
										</div>
										<div class="ln_solid"></div>
										<div class="item form-group">
											<div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
												<button type="submit" class="btn btn-success"><i class="glyphicon glyphicon-search"></i> Search</button>												
												<button class="btn btn-primary" type="reset"><i class="glyphicon glyphicon-refresh"></i> Reset</button>												
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>

	
	<div class="table-responsive">
		 
                      <table class="table table-striped jambo_table bulk_action">
                        <thead>
                          <tr class="headings">                   
                            <th class="column-title">Id</th>
                            <th class="column-title">Tên khách hàng</th>
                            <th class="column-title">Số điện thoại</th>
                            <th class="column-title">Tên tour</th>
                            <th class="column-title">Giá</th>  
                            <th class="column-title">Ngày khởi hành </th>    
                            <th class="column-title">Nơi khởi hành </th> 
                            <th class="column-title">Trạng thái</th>                               
                            <th width="20%" class="column-title no-link last text-center" colspan="3" ><span class="nobr">Action</span>
                            </th>
                          </tr>
                        </thead>
                        <tbody>
							<tr th:each="item : ${pageProduct.getContent()}">
                            <td th:text=${item.id}/>
                             <td>
						      	<img alt="" th:src="@{ ${item.images}}" width="80px" height="80px">
						      </td>           
                        	<td th:text=${item.name}/>
                        	<td th:text=${item.phone}/>
                        	<td th:text=${item.products.name}/>
                        	<td th:text=${item.price}/>
                        	<td th:text=${item.date}  />
                        	<td th:text=${item.products.provinceText}  />
                        	<th:block th:if="${approvedStep == 0}">
                        		<td  > Đang xử lý  </td>
                        	</th:block>
                        	<th:block th:if="${approvedStep == 1}">
                        		<td> Đã duyệt </td>
                        	</th:block>
                        	 <th:block th:if="${approvedStep == 2}">
                        		<td  > Đã huỷ</td>
                        	</th:block>
                            <td colspan="3" class="last text-center">                 
	                            <a href="javascript:void(0)" th:onclick="cancelItem([[${item.id}]])" class="btn btn-danger btn-delete"><i class="glyphicon glyphicon-edit"></i></a> 
	                            <a href="javascript:void(0)" th:onclick="completeItem([[${item.id}]])" class="btn btn-danger btn-delete"><i class="glyphicon glyphicon-trash"></i></a> 
                            </td>                  
                          	</tr>
                     					
                        </tbody>
                      </table>
     			<ul th:replace="layouts::pagination"></ul>                   
      </div>
	 
	</div>
</div>

<script type="text/javascript">
	function gotoPage(page){
		$("#searchForm").attr('action',"/orders/list/"+page);
		$("#searchForm").submit();
	}
 
	function deleteItem(id){
		if(confirm("Bạn có chắc chắn xóa nó không ?")){
			location.href="/orders/delete/"+id;
		}
	}
	function completeItem(id){
		if(confirm("Bạn có chắc chắn huỷ nó không ?")){
			location.href="/orders/cancel/"+id;
		}
	}
	function cancelItem(id){
		if(confirm("Bạn có chắc chắn duyệt nó không ?")){
			location.href="/orders/complete/"+id;
		}
	}
	
	$(document).ready(function(){
		var msgError = '[[${msgError}]]';
		var msgSuccess = '[[${msgSuccess}]]';
		if(msgError){
			new PNotify({
		        title: 'Thông Báo',
		        text: msgError,
		        type: 'error',
		        styling: 'bootstrap3'
		        
		    });	
		}
		if(msgSuccess){
			new PNotify({
		        title: 'Thông Báo',
		        text: msgSuccess,
		        type: 'success',
		        styling: 'bootstrap3'
		    });	
		}
	});
	
	$(document).ready(function(){
		$('#orderList').parents("li").addClass('active').siblings().removeClass("active");
		$('#orderList').addClass('current-page').siblings().removeClass("current-page");
		$('#orderList').parents().show();
	});
	

	
</script>
        <!-- /page content -->
        
        
        <!-- footer content -->
        
		<footer th:replace="layouts::footer"   >
        
        </footer>
        
        <!-- /footer content -->
      </div>
    </div>
     
    <script th:src="@{/resources/vendors/jqvmap/dist/jquery.vmap.js}"></script>
    <script th:src="@{/resources/vendors/jqvmap/dist/maps/jquery.vmap.world.js}"></script>
    <script th:src="@{/resources/vendors/jqvmap/examples/js/jquery.vmap.sampledata.js}"></script>
	<script th:src="@{/resources/vendors/Chart.js/dist/Chart.min.js}"></script>
    <script th:src="@{/resources/vendors/pnotify/dist/pnotify.js}"></script>
    <script th:src="@{/resources/vendors/pnotify/dist/pnotify.buttons.js}"></script>
    <script th:src="@{/resources/vendors/pnotify/dist/pnotify.nonblock.js}"></script>
    <script th:src="@{/resources/vendors/jquery/dist/jquery.min.js}"></script>
    <script th:src="@{/resources/vendors/bootstrap/dist/js/bootstrap.min.js}"></script>
    <script th:src="@{/resources/vendors/fastclick/lib/fastclick.js}"></script>
    <script th:src="@{/resources/vendors/nprogress/nprogress.js}"></script>
    <script th:src="@{/resources/vendors/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js}"></script>
 	<script th:srr="@{/resources/vendors/moment/min/moment.min.js}"></script>
    <script th:src="@{/resources/vendors/bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js}"></script>
    <script th:src="@{/resources/build/js/custom.min.js}"></script>
  </body>
</html>